!function(i){"use strict";function e(i,e){var t=i.find(".ignition-side-image-control-attachment-placeholder"),n=i.find(".ignition-side-image-control-attachment-preview");if(e){t.hide(),n.show();var o=e.sizes.medium&&e.sizes.medium.url||e.url;n.find(".ignition-side-image-control-attachment-thumb").attr("src",o)}else t.show(),n.hide()}function t(i,e){var t=i.find(".ignition-side-image-control-hidden-value"),n=JSON.parse(t.val()),o=_.extend({},n,e);t.val(JSON.stringify(o))}i(".ignition-side-image-control").each(function(){var n=i(this),o=n.data("attachment");e(n,o);var a;n.on("click keydown",".upload-button, .ignition-side-image-control-thumbnail, .ignition-side-image-control-placeholder",function(){if(a)return void a.open();a=wp.media({title:sideImageBgStrings.selectImage,multiple:!1,date:!1}),a.on("select",function(){var i=a.state().get("selection").first().toJSON();i&&"image"!==i.type||(t(n,{image_id:i&&i.id,image_url:i&&i.url}),e(n,i))}),a.open()}),n.on("click keydown",".remove-button",function(){t(n,{image_id:"",image_url:""}),e(n,!1)}),n.on("change",'select, input[type="number"]',function(){var e=i(this),o={};o[e.data("property")]=e.val(),t(n,o)}),n.on("change",'input[type="checkbox"]',function(){var e=i(this),o={};o[e.data("property")]=e.prop("checked"),t(n,o)})})}(jQuery);