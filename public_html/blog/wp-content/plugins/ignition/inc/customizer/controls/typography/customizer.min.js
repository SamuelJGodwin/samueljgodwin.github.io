!function(a){"use strict";wp.customize.controlConstructor["ignition-typography"]=wp.customize.Control.extend({ready:function(){var t=this,n=t.container.find('[data-property="family"]'),e=t.container.find('[data-property="variant"]'),i=t.container.find('[data-property="size"]'),r=t.container.find('[data-property="lineHeight"]'),o=t.container.find('[data-property="transform"]'),s=t.container.find('[data-property="spacing"]');n.on("change",function(){var n=a(this),i=n.val(),r=_.findWhere(ignition_gfonts.fonts,{family:i}),o=n.parents("[data-breakpoint]").find('[data-property="variant"]'),s=n.parents("[data-breakpoint]").data("breakpoint");if(r){var p=r.variants.map(function(t){return a("<option />",{value:t,selected:"regular"===t,text:ignition_gfonts.variant_labels[t]})});o.html(p),o.parent().show(),t.saveValues({family:i,variant:e.val(),is_gfont:"webfonts#webfont"===r.kind},s)}else t.saveValues({family:"",variant:""},s),o.parent().hide()}),e.on("change",function(){var n=a(this),e=n.parents("[data-breakpoint]").data("breakpoint");t.saveValues({variant:n.val()},e)}),i.on("change keyup",function(){var n=a(this),e=n.parents("[data-breakpoint]").data("breakpoint");t.saveValues({size:n.val()},e)}),r.on("change keyup",function(){var n=a(this),e=n.parents(".ignition-control-range"),i=n.val(),r=n.parents("[data-breakpoint]").data("breakpoint");"range"===n.attr("type")?e.find('input[type="number"]').val(i):e.find('input[type="range"]').val(i),t.saveValues({lineHeight:n.val()},r)}),o.on("change",function(){var n=a(this),e=n.parents("[data-breakpoint]").data("breakpoint");t.saveValues({transform:n.val()},e)}),s.on("change keyup",function(){var n=a(this),e=n.parents("[data-breakpoint]").data("breakpoint");t.saveValues({spacing:parseFloat(n.val())},e)}),t.container.on("click",".button-group-devices button",function(){var n=a(this).index(),e=a(this).data("device");t.displayDeviceControls(e),a(".wp-full-overlay-footer .devices button").eq(n).trigger("click"),a("body").trigger("on-responsive-mode-change",[e,t])}),a("body").on("on-responsive-mode-change",function(a,n,e){t!==e&&t.displayDeviceControls(n)})},displayDeviceControls:function(a){var t=this,n=t.container.find(".button-group-devices button"),e=t.container.find(".ignition-typography-control-group-wrap"),i=n.filter('[data-device="'+a+'"]'),r=i.index();n.removeClass("active"),i.addClass("active"),e.hide().eq(r).css("display","block")},saveValues:function(a,t){var n=this,e=n.container.find('input[type="hidden"]');t=t||"desktop";var i=n.setting.get();_.extend(i[t],a),e.val(JSON.stringify(i)).trigger("change"),n.setting.set(i)}})}(jQuery);