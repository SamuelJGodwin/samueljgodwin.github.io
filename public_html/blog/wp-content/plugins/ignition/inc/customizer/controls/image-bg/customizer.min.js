!function(e){"use strict";wp.customize.controlConstructor["ignition-image-bg"]=wp.customize.Control.extend({ready:function(){var t,n=this;n.renderAttachmentView(n.params.attachment),n.container.on("click keydown",".upload-button, .ignition-image-bg-control-thumbnail, .ignition-image-bg-control-placeholder",function(){if(t)return void t.open();t=wp.media({title:customizerImageBgStrings.selectImage,multiple:!1,date:!1}),t.on("select",function(){var e=t.state().get("selection").first().toJSON();e&&"image"!==e.type||(n.saveValue({image_id:e&&e.id,image_url:e&&e.url}),n.renderAttachmentView(e))}),t.open()}),n.container.on("click keydown",".remove-button",function(){n.saveValue({image_id:"",image_url:""}),n.renderAttachmentView(!1)}),n.container.on("change",'select, input[type="number"]',function(){var t=e(this),i={};i[t.data("property")]=t.val(),n.saveValue(i)}),n.container.on("change",'input[type="checkbox"]',function(){var t=e(this),i={};i[t.data("property")]=t.prop("checked"),n.saveValue(i)})},renderAttachmentView:function(e){var t=this,n=t.container.find(".ignition-image-bg-control-attachment-placeholder"),i=t.container.find(".ignition-image-bg-control-attachment-preview");if(e){n.hide(),i.show();var a=e.sizes.medium&&e.sizes.medium.url||e.url;i.find(".ignition-image-bg-control-attachment-thumb").attr("src",a)}else n.show(),i.hide()},saveValue:function(e){var t=this,n=_.extend({},t.setting.get(),e);t.setting(n)}})}(jQuery);